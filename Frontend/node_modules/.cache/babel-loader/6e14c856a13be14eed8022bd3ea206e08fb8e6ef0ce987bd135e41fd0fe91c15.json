{"ast":null,"code":"var _jsxFileName = \"/Users/familleghariani/Desktop/Projet-11/Frontend/src/components/EditUser/EditUser.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction EditUser() {\n  _s();\n  const token = useSelector(state => state.auth.token);\n  const firstname = useSelector(state => state.name.firstname);\n  const lastname = useSelector(state => state.name.lastname);\n  const [showForm, setShowForm] = useState(false);\n  const [newUsername, setNewUsername] = useState('');\n  const dispatch = useDispatch();\n  const toggleForm = () => {\n    setShowForm(!showForm);\n  };\n  const handleInputChange = event => {\n    setNewUsername(event.target.value);\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    try {\n      const response = await fetch('http://localhost:3001/api/v1/user/profile', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          userName: newUsername\n        })\n      });\n      if (response.ok) {\n        console.log(response);\n        dispatch({\n          type: 'SET_USER',\n          payload: {\n            username: newUsername,\n            firstname: firstname,\n            lastname: lastname\n          }\n        });\n      } else {\n        console.error('Erreur lors de l envoi du nouveau nom d utilisateur');\n      }\n    } catch (error) {\n      console.error('Erreur lors de la requête :', error);\n    }\n    setNewUsername('');\n    setShowForm(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"account-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Welcome back, \", firstname, \" \", lastname, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this), !showForm && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"transaction-button button\",\n        onClick: toggleForm,\n        children: \"Edit your name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"account-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"First Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: firstname,\n        disabled: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Last Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: lastname,\n        disabled: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"New Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newUsername,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"transaction-button button\",\n        children: \"Confirm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(EditUser, \"WGn2WIQzAQV6fHf2fIMcmcZQ+wk=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n_c = EditUser;\nexport default EditUser;\nvar _c;\n$RefreshReg$(_c, \"EditUser\");","map":{"version":3,"names":["React","useState","useSelector","useDispatch","jsxDEV","_jsxDEV","Fragment","_Fragment","EditUser","_s","token","state","auth","firstname","name","lastname","showForm","setShowForm","newUsername","setNewUsername","dispatch","toggleForm","handleInputChange","event","target","value","handleSubmit","preventDefault","response","fetch","method","headers","Authorization","body","JSON","stringify","userName","ok","console","log","type","payload","username","error","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","disabled","onChange","required","_c","$RefreshReg$"],"sources":["/Users/familleghariani/Desktop/Projet-11/Frontend/src/components/EditUser/EditUser.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useSelector, useDispatch} from 'react-redux';\n\nfunction EditUser() {\n   const token = useSelector((state) => state.auth.token);\n   const firstname = useSelector((state) => state.name.firstname);\n   const lastname = useSelector((state) => state.name.lastname);\n\n   const [showForm, setShowForm] = useState(false);\n   const [newUsername, setNewUsername] = useState('');\n\n   const dispatch = useDispatch();\n\n   const toggleForm = () => {\n      setShowForm(!showForm);\n   };\n\n   const handleInputChange = (event) => {\n      setNewUsername(event.target.value);\n   };\n\n   const handleSubmit = async (event) => {\n      event.preventDefault();\n\n      try {\n         const response = await fetch('http://localhost:3001/api/v1/user/profile', {\n         method: 'PUT',\n         headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`,\n         },\n         body: JSON.stringify({userName: newUsername}),\n         });\n\n         if (response.ok) {\n         console.log(response);\n         dispatch({\n            type: 'SET_USER',\n            payload: {\n               username: newUsername,\n               firstname: firstname,\n               lastname: lastname,\n            },\n         });\n\n         \n         } else {\n         console.error('Erreur lors de l envoi du nouveau nom d utilisateur');\n         }\n         \n      } catch (error) {\n         console.error('Erreur lors de la requête :', error);\n      }\n      setNewUsername('');\n      setShowForm(false);\n   };\n\n   return (\n      <>\n          <section className=\"account-header\">\n            <h1>Welcome back, {firstname} {lastname}!</h1>\n\n            {!showForm && (\n               <button className=\"transaction-button button\" onClick={toggleForm}>Edit your name</button>\n            )}\n         </section>\n\n         {showForm && (\n            <form className=\"account-form\" onSubmit={handleSubmit}>\n               <label>First Name:</label>\n               <input type=\"text\" value={firstname} disabled/>\n               \n               <label>Last Name:</label>\n               <input type=\"text\" value={lastname} disabled />\n               \n               <label>New Username:</label>\n               <input type=\"text\" value={newUsername} onChange={handleInputChange} required/>\n               \n               <button type=\"submit\" className='transaction-button button'>Confirm</button>\n            </form>\n\n         )}\n      </>\n   );\n}\n\nexport default EditUser;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}