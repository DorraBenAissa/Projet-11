{"ast":null,"code":"var _jsxFileName = \"/Users/familleghariani/Desktop/Projet-11/Frontend/src/components/Account/Account.jsx\",\n  _s = $RefreshSig$();\n// IMPORTS\nimport { NavLink } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport React, { useEffect } from 'react';\nimport './account.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Account() {\n  _s();\n  const dispatch = useDispatch();\n  const token = useSelector(state => state.auth.token);\n  const username = useSelector(state => state.name.username);\n  const handleLogout = () => {\n    dispatch({\n      // Enregistrement du token dans le store\n      type: 'LOGOUT'\n    });\n  };\n  useEffect(() => {\n    if (token) {\n      const fetchData = async () => {\n        try {\n          const response = await fetch('http://localhost:3001/api/v1/user/profile', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          if (response.ok) {\n            const data = await response.json();\n            console.log(data);\n            dispatch({\n              // Enregistrement des donées dans le store\n              type: 'SET_USER',\n              payload: {\n                username: data.body.userName,\n                firstname: data.body.firstName,\n                lastname: data.body.lastName\n              }\n            });\n          } else {\n            console.log(\"Erreur lors de la récupération du profil de l'utilisateur\");\n          }\n        } catch (error) {\n          console.log(\"Erreur lors de la récupération du profil de l'utilisateur\");\n        }\n      };\n      fetchData();\n    }\n  }, [dispatch, token]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: token ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cont-user\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-user\",\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n        className: \"btn-user\",\n        to: \"/\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-user-circle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cont-user\",\n      children: [/*#__PURE__*/_jsxDEV(NavLink, {\n        className: \"btn-user\",\n        to: \"/signup\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n        className: \"btn-user\",\n        to: \"/signin\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(Account, \"rMPPA0MORa5ZBnvb+cnO9hhdg/0=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = Account;\nexport default Account;\nvar _c;\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["NavLink","useSelector","useDispatch","React","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","Account","_s","dispatch","token","state","auth","username","name","handleLogout","type","fetchData","response","fetch","method","headers","ok","data","json","console","log","payload","body","userName","firstname","firstName","lastname","lastName","error","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","$RefreshReg$"],"sources":["/Users/familleghariani/Desktop/Projet-11/Frontend/src/components/Account/Account.jsx"],"sourcesContent":["// IMPORTS\nimport { NavLink } from 'react-router-dom'\nimport { useSelector, useDispatch } from 'react-redux';\nimport React, { useEffect } from 'react';\n\nimport './account.scss'\n\n\nfunction Account() {\n\n   const dispatch = useDispatch();\n   const token = useSelector((state) => state.auth.token);\n   const username = useSelector((state) => state.name.username);\n\n   const handleLogout = () => {\n      dispatch({ // Enregistrement du token dans le store\n         type: 'LOGOUT',\n      });\n   };\n\n   useEffect(() => {\n      if (token) {\n         const fetchData = async () => {\n            try {\n            const response = await fetch('http://localhost:3001/api/v1/user/profile', {\n               method: 'POST',\n               headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${token}`,\n               },\n            });\n   \n            if (response.ok) {\n               const data = await response.json();\n               console.log(data);\n\n               dispatch({ // Enregistrement des donées dans le store\n                  type: 'SET_USER',\n                  payload: {\n                     username: data.body.userName,\n                     firstname: data.body.firstName,\n                     lastname: data.body.lastName,\n                  },\n               });\n               \n            } else {\n               console.log(\"Erreur lors de la récupération du profil de l'utilisateur\");\n            }\n            } catch (error) {\n               console.log(\"Erreur lors de la récupération du profil de l'utilisateur\");\n            }\n         };\n         \n         fetchData();\n\n      }\n      }, [dispatch, token]);\n\n   return (\n      <>\n         {token ? (\n            <div className='cont-user'>\n               <button className='btn-user' onClick={handleLogout}>Logout</button>\n               <NavLink className='btn-user' to=\"/\">\n                  <i className=\"fas fa-user-circle\"></i>\n                  <p>{username}</p>\n               </NavLink>\n            </div>\n         ) : (\n            <div className='cont-user'>\n               <NavLink className='btn-user' to=\"/signup\">\n                  <p>Sign Up</p>\n               </NavLink>\n               \n               <NavLink className='btn-user' to=\"/signin\">\n                  <p>Sign In</p>\n               </NavLink>\n            </div>\n         )}\n      </>\n   )\n }\n \nexport default Account"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}