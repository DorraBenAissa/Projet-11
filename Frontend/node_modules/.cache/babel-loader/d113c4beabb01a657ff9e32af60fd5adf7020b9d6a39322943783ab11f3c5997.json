{"ast":null,"code":"var _jsxFileName = \"/Users/familleghariani/Desktop/Projet-11/Frontend/src/components/EditUser/EditUser.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport './edituser.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction EditUser() {\n  _s();\n  const token = useSelector(state => state.auth.token);\n  const firstname = useSelector(state => state.name.firstname);\n  const lastname = useSelector(state => state.name.lastname);\n  const [showForm, setShowForm] = useState(false);\n  const [newUsername, setNewUsername] = useState('');\n  const [error, setError] = useState(false);\n  const dispatch = useDispatch();\n  const toggleForm = () => {\n    setShowForm(!showForm);\n  };\n  const handleInputChange = event => {\n    setNewUsername(event.target.value);\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    try {\n      const response = await fetch('http://localhost:3001/api/v1/user/profile', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          userName: newUsername\n        })\n      });\n      if (response.ok) {\n        setError(false);\n        dispatch({\n          type: 'SET_USER',\n          payload: {\n            username: newUsername,\n            firstname: firstname,\n            lastname: lastname\n          }\n        });\n      } else {\n        setError(true);\n      }\n    } catch (error) {\n      setError(true);\n    }\n    setNewUsername('');\n    setShowForm(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"account-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Welcome back, \", firstname, \" \", lastname, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"sign-in__error-message\",\n        children: \"Erreur lors de la modification du User Name, merci de r\\xE9essayer !\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 23\n      }, this), !showForm && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"transaction-button button\",\n        onClick: toggleForm,\n        children: \"Edit your name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"account-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"First Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: firstname,\n        disabled: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Last Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: lastname,\n        disabled: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"New Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newUsername,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"transaction-button button\",\n        children: \"Confirm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(EditUser, \"HNwt1AdBR34ZOVR/Nl7l4hP0GXs=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n_c = EditUser;\nexport default EditUser;\nvar _c;\n$RefreshReg$(_c, \"EditUser\");","map":{"version":3,"names":["React","useState","useSelector","useDispatch","jsxDEV","_jsxDEV","Fragment","_Fragment","EditUser","_s","token","state","auth","firstname","name","lastname","showForm","setShowForm","newUsername","setNewUsername","error","setError","dispatch","toggleForm","handleInputChange","event","target","value","handleSubmit","preventDefault","response","fetch","method","headers","Authorization","body","JSON","stringify","userName","ok","type","payload","username","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","disabled","onChange","required","_c","$RefreshReg$"],"sources":["/Users/familleghariani/Desktop/Projet-11/Frontend/src/components/EditUser/EditUser.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useSelector, useDispatch} from 'react-redux';\nimport './edituser.scss';\nfunction EditUser() {\n   \n   const token = useSelector((state) => state.auth.token);\n   const firstname = useSelector((state) => state.name.firstname);\n   const lastname = useSelector((state) => state.name.lastname);\n\n   const [showForm, setShowForm] = useState(false);\n   const [newUsername, setNewUsername] = useState('');\n   const [error, setError] = useState(false);\n\n   const dispatch = useDispatch();\n\n   const toggleForm = () => {\n      setShowForm(!showForm);\n   };\n\n   const handleInputChange = (event) => {\n      setNewUsername(event.target.value);\n   };\n\n   const handleSubmit = async (event) => {\n      event.preventDefault();\n\n      try {\n         const response = await fetch('http://localhost:3001/api/v1/user/profile', {\n         method: 'PUT',\n         headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`,\n         },\n         body: JSON.stringify({userName: newUsername}),\n         });\n\n         if (response.ok) {\n            setError(false);\n         dispatch({\n            type: 'SET_USER',\n            payload: {\n               username: newUsername,\n               firstname: firstname,\n               lastname: lastname,\n            },\n         });\n\n         \n         } else {\n         setError(true);\n         }\n         \n      } catch (error) {\n         setError(true);\n      }\n      setNewUsername('');\n      setShowForm(false);\n   };\n\n   return (\n      <>\n          <section className=\"account-header\">\n            <h1>Welcome back, {firstname} {lastname}!</h1>\n            {error && <p className=\"sign-in__error-message\">Erreur lors de la modification du User Name, merci de r√©essayer !</p>}\n            {!showForm && (\n               <button className=\"transaction-button button\" onClick={toggleForm}>Edit your name</button>\n            )}\n         </section>\n\n         {showForm && (\n            <form className=\"account-form\" onSubmit={handleSubmit}>\n               <label>First Name:</label>\n               <input type=\"text\" value={firstname} disabled/>\n               \n               <label>Last Name:</label>\n               <input type=\"text\" value={lastname} disabled />\n               \n               <label>New Username:</label>\n               <input type=\"text\" value={newUsername} onChange={handleInputChange} required/>\n               \n               <button type=\"submit\" className='transaction-button button'>Confirm</button>\n            </form>\n\n         )}\n      </>\n   );\n}\n\nexport default EditUser;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}